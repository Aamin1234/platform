# Ushahidi Platform Docker containers

dbdata:
  build: ./containers/db-data/
code:
  build: ./containers/production-code/
db:
  image: mysql
  volumes_from:
    - dbdata
  environment:
    MYSQL_DATABASE: ushahidi
    MYSQL_ROOT_PASSWORD: changethisrootpassword
php:
  build: ./containers/php/
  links:
    - db
  volumes_from:
    - code
nginx:
  build: ./containers/nginx/
  ports:
    - "80:80"
  links:
    - php:fpm
  volumes_from:
    - code
update:
  build: ./containers/update/
  command: bin/update --production
  volumes_from:
    - code
  links:
    - db
  environment:
    MYSQL_DATABASE: ushahidi
