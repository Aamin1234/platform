# Ushahidi Platform Docker containers

data:
  build: ./containers/data/

code:
  build: .



db:
  image: mysql
  volumes_from:
    - data
  environment:
    MYSQL_DATABASE: ushahidi
    MYSQL_ROOT_PASSWORD: changethisrootpassword

php:
  build: ./containers/php/
  links:
    - db
  volumes_from:
    - code
    - data

nginx:
  build: ./containers/nginx/
  ports:
    - "80:80"
  links:
    - php:fpm
  volumes_from:
    - code
    - data

update:
  build: ./containers/update/
  volumes_from:
    - code
    - data
  links:
    - db
  environment:
    MYSQL_DATABASE: ushahidi
  command: bin/update --production
