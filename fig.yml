# Ushahidi Platform Docker containers

data:
  build: .
  volumes:
    - .:/data
db:
  image: mysql
  volumes_from:
    - data
  environment:
    MYSQL_DATABASE: ushahidi
    MYSQL_ROOT_PASSWORD: changethisrootpassword
php:
  build: ./containers/php/
  links:
    - db
  volumes_from:
    - data
nginx:
  build: ./containers/nginx/
  ports:
    - "8000:80"
  links:
    - php:fpm
  volumes_from:
    - data
  volumes:
    - ./containers/nginx/sites-enabled:/etc/nginx/sites-enabled
    - ./containers/nginx/conf.d:/etc/nginx/conf.d
update:
  build: ./containers/update/
  volumes_from:
    - data
  links:
    - db
  environment:
    MYSQL_DATABASE: ushahidi
