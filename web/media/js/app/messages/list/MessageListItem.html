<div class="message-card-wrapper">

	<div class="message-card-panel-wrapper  message-card-panel-wrapper--map  js-message-card-panel-map">
		<div class="message-card-panel  message-card-panel--map">
			{{! TODO: add support for real map}}
		</div> <!-- end .message-card-panel-map -->
	</div> <!-- end .message-card-panel-wrapper -->

	<article class="message-card">
		<div class="card__icon">
		{{! TODO: this should be dynamic from "type", eg: fa-envelope for email, fa-twitter-square for twitter, etc
			 correct thing to do would be to add .icon-email, .icon-sms, etc classes}}
		<i class="fa  fa-envelope"></i>
		</div>
		<div class="card__details">
			<h5 class="card__header">
				<a href="{{#url}}messages/{{id}}{{/url}}">
				{{#if contact}}{{contact.contact}}
				{{else}}Anonymous
				{{/if}}
				</a>
			</h5>
			<p class="message-date-created"> <i class="fa  fa-clock-o"></i>{{ datetime-calendar created }}</p>
		</div> <!-- end .message-card-details -->
		<div class="card__excerpt-wrapper">
			<div class="card__excerpt">
				<span class="excerpt js-elipsis">{{ prune message 80 }}</span>
				<span class="rest-of-message js-rest-of-message">{{message}}</span>
				<span class="show-rest-of-message"><i class="expand"></i></span>
			</div> <!-- end .message-card-excerpt -->
		</div>
		<div class="card__meta">
			{{#if data_provider}}
			<p> <i class="fa  fa-bolt"></i>{{data_provider}}</p>
			{{/if}}
			{{#if location}}
			{{! TODO: add support for locations}}
			<p> <i class="fa  fa-map-marker"></i>{{location}}</p>
			{{/if}}
			{{#if status}}
			<p> <i class="fa  fa-inbox"></i>{{status}}</p>
			{{/if}}
		</div> <!-- end .message-card-meta -->
	</article> <!-- end .message-card -->

	<div class="message-card-actions-wrapper  hide-for-small">
		<ul class="message-card-actions-list">
			<li class="message-card-actions-list__item"><a href="" class="js-message-activity" data-id="{{post}}"> <i class="fa  fa-list"></i>Activity</a></li>
			<li class="message-card-actions-list__item"><a href="" class="js-message-reply"> <i class="fa  fa-reply"></i>Reply</a></li>
			{{#if isIncoming}}
				{{#if post}}
				<li class="message-card-actions-list__item"><a href="{{#url}}posts/{{post}}{{/url}}" class="js-message-view-post"> <i class="fa  fa-edit"></i>View Post</a></li>
				{{else}}
				<li class="message-card-actions-list__item">
					<a class="js-message-create-post-forms"> <i class="fa  fa-plus-circle"></i>Create Post</a>
					<div class="js-message-create-post-forms-drop">
						<h6>Select Form</h6>
						<ul>
						{{#each forms}}
							<li><a class="js-message-create-post-form" data-form-id="{{this.id}}">{{this.name}}</a></li>
						{{/each}}
						</ul>
					</div>
				</li>
				{{/if}}
				{{#if isArchived}}
				<li class="message-card-actions-list__item"><a href="" class="js-message-unarchive"> <i class="fa  fa-archive"></i>Move to Inbox</a></li>
				{{else}}
				<li class="message-card-actions-list__item"><a href="" class="js-message-archive"> <i class="fa  fa-archive"></i>Archive</a></li>
				{{/if}}
			{{/if}}
		</ul> <!-- end .message-card-actions -->
	</div> <!-- end .message-card-actions-wrapper .hide-for-small-->

	<div class="message-card-actions-wrapper  show-for-small">
		<a class="js-message-card-actions-drop dropdown-button show-for-small">actions</a><br>
		<ul class="js-message-card-actions-drop-content dropdown-list show-for-small">
			<li><a class="js-message-card-action-activity"> <i class="fa  fa-list"></i>Activity</a></li>
			<li><a class="js-message-reply"> <i class="fa  fa-reply"></i>Reply</a></li>
			{{#if isIncoming}}
			{{#if post}}
				<li><a href="/posts/{{post}}" class="js-message-view-post"> <i class="fa  fa-edit"></i>View Post</a></li>
			{{else}}
				<li>
					<a class="js-message-create-post-forms"> <i class="fa  fa-edit"></i>Create Post</a>
					<div class="js-message-create-post-forms-drop"> 
						<h6>Select Form</h6>
						<ul>
						{{#each forms}}
							<li><a class="js-message-create-post-form" data-form-id="{{this.id}}">{{this.name}}</a></li>
						{{/each}}
						</ul>
					</div>
				</li>
			{{/if}}
			{{#if isArchived}}
				<li><a href="#" class="js-message-unarchive"> <i class="fa  fa-archive"></i>Move to Inbox</a></li>
			{{else}}
				<li><a href="#" class="js-message-archive"> <i class="fa  fa-archive"></i>Archive</a></li>
			{{/if}}
			{{/if}}
		</ul> <!-- end .message-card-actions -->
	</div> <!-- end .message-card-actions-wrapper .show-for-small -->

	<!-- TODO: These panels should be partials -->

	<div class="card-panel-wrapper hide js-message-card-panel-activity">
		<div class="card-panel">
			<h6 class="card-panel__header">Message Activity</h6>
			<ul class="list-view-reply-list card-panel--activity-list">
			</ul> <!-- end .message-card-panel-activity-list -->
		</div> <!-- end .message-card-panel -->
	</div> <!-- end .message-card-panel-wrapper -->

	<div class="card-panel-wrapper js-message-card-panel-reply hide">
		<div class="card-panel">
			<h6 class="card-panel__header">Send a Response</h6>
			<form role="form" action="" class="js-message-post-reply-form">
				<textarea class="textarea js-response-textarea" name="Name" rows="2" cols="40"></textarea>
				<div class="card-panel__button-wrap">
					<button type="submit" class="card-reply-autofill  js-location-autofill"><i class="fa  fa-reply"></i> location</button>
					<button type="submit" class="card-reply-autofill  card-reply-autofill--more-info  js-more-info-autofill"><i class="fa  fa-reply"></i> more info</button>
				</div>
				<button type="submit" class="card-reply-send-button js-message-post-reply">Send</button>
			</form>
		</div> <!-- end .message-card-panel -->
	</div> <!-- end .message-card-panel-wrapper -->

	<!-- end panel partials -->
</div> <!-- end .message-card-wrapper -->
